---
title: 'D√©ploiement de Documenso avec Vercel, Supabase et Resend'
description: C'est la premi√®re partie de la nouvelle s√©rie Building Documenso, o√π je d√©cris les d√©fis et les choix de conception que nous faisons en construisant la plateforme de signature ouverte la plus ouverte au monde.
authorName: 'Ephraim Atta-Duncan'
authorImage: '/blog/blog-author-duncan.jpeg'
authorRole: 'Stagiaire Ing√©nieur Logiciel'
date: 2023-09-08
tags:
  - Open Source
  - Auto-h√©bergement
  - Tutoriel
---

Dans cet article, nous vous guiderons √† travers le d√©ploiement et l'auto-h√©bergement de Documenso en utilisant Vercel, Supabase et Resend.

Vous apprendrez :

- Comment configurer une base de donn√©es Postgres avec Supabase,
- Comment installer SMTP avec Resend,
- Comment d√©ployer votre projet avec Vercel.

Si vous ne savez pas ce qu'est [Documenso](https://documenso.com/), il s'agit d'une alternative open-source √† DocuSign, avec pour mission de cr√©er une infrastructure de signature ouverte tout en favorisant l'ouverture, la coop√©ration et la transparence.

## Pr√©requis

Avant de commencer, assurez-vous d'avoir un compte [GitHub](https://github.com/signup). Vous devez √©galement avoir [Node.js](https://nodejs.org/en) et [npm](https://www.npmjs.com/) install√©s sur votre machine locale (note : vous avez √©galement la possibilit√© de l'h√©berger sur un environnement cloud en utilisant Gitpod, par exemple ; ce serait un autre post). Si vous avez besoin de comptes sur Vercel, Supabase et Resend, cr√©ez-les en visitant les sites web de [Vercel](https://vercel.com/), [Supabase](https://supabase.com/) et [Resend](https://resend.com/).

Checklist :

- [ ] Avoir un compte GitHub
- [ ] Installer Node.js
- [ ] Installer npm
- [ ] Avoir un compte Vercel
- [ ] Avoir un compte Supabase
- [ ] Avoir un compte Resend

## Guide √©tape par √©tape pour d√©ployer Documenso avec Vercel, Supabase et Resend

Pour d√©ployer Documenso, nous suivrons les √©tapes suivantes :

1. Forkez le d√©p√¥t Documenso
2. Clonez le d√©p√¥t forkez et installez les d√©pendances
3. Cr√©ez un nouveau projet sur Supabase
4. Copiez l'URL de connexion √† la base de donn√©es Postgres de Supabase
5. Cr√©ez un fichier `.env`
6. Ex√©cutez la migration sur la base de donn√©es Postgres de Supabase
7. Obtenez vos cl√©s SMTP sur Resend
8. Cr√©ez un nouveau projet sur Vercel
9. Ajoutez les variables d'environnement √† votre projet Vercel

√ätes-vous pr√™t ? C'est parti !

### √âtape 1 : Forkez le d√©p√¥t Documenso

Commencez par cr√©er un fork de Documenso sur GitHub. Vous pouvez le faire en visitant le [d√©p√¥t Documenso](https://github.com/documenso/documenso) et en cliquant sur le bouton 'Fork' (et √©toilez le repo !).

![Documenso](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/wkcujctpf86p56bju3mq.png)

Choisissez votre profil GitHub comme propri√©taire et cliquez sur 'Create fork' pour cr√©er un fork du repo.

![Forkez le d√©p√¥t Documenso sur GitHub](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/xf49r2byu9nnd1465niy.png)

### √âtape 2 : Clonez le d√©p√¥t forkez et installez les d√©pendances

Clonez le d√©p√¥t forkez sur votre machine locale dans n'importe quel r√©pertoire de votre choix. Ouvrez votre terminal et entrez les commandes suivantes :

```bash
# Clonez le repo en utilisant GitHub CLI
gh repo clone [votre_nom_utilisateur_github]/documenso

# Clonez le repo en utilisant Git
git clone <https://github.com/[votre_nom_utilisateur_github]/documenso.git>
```

Naviguez maintenant dans le r√©pertoire et installez les d√©pendances du projet :

```bash
cd documenso
npm install
```

### √âtape 3 : Cr√©ez un nouveau projet sur Supabase

Maintenant, configurons la base de donn√©es.

Si ce n'est pas d√©j√† fait, cr√©ez un nouveau projet sur Supabase. Cela cr√©era automatiquement une nouvelle base de donn√©es Postgres pour vous.

Sur votre tableau de bord Supabase, cliquez sur le bouton '**Nouveau projet**' et choisissez votre organisation.

Sur la page '**Cr√©er un nouveau projet**', d√©finissez un nom de base de donn√©es **documenso** et un mot de passe s√©curis√© pour votre base de donn√©es. Choisissez une r√©gion proche de vous, un plan de tarification, puis cliquez sur '**Cr√©er un nouveau projet**' pour cr√©er votre projet.

![Cr√©ez un nouveau projet sur Supabase](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/w5lqz771iupjyi1ekfdz.png)

### √âtape 4 : Copiez l'URL de connexion √† la base de donn√©es Postgres de Supabase

Dans votre projet, cliquez sur l'ic√¥ne '**Param√®tres**' en bas √† gauche.

Sous la section '**Param√®tres du projet**', cliquez sur '**Base de donn√©es**' et faites d√©filer jusqu'√† la section '**Cha√Æne de connexion**'. Copiez l'URL '**URI**' et mettez √† jour avec le mot de passe que vous avez choisi √† l'√©tape pr√©c√©dente.

![Copiez l'URL de connexion √† la base de donn√©es Postgres de Supabase](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/y1ldu3qrg9moednbzjij.png)

### √âtape 5 : Cr√©ez un fichier `.env`

Cr√©ez un fichier `.env` √† la racine de votre projet en copiant le contenu du fichier `.env.example`.

Ajoutez la cha√Æne de connexion que vous avez copi√©e depuis votre tableau de bord Supabase √† la variable `DATABASE_URL` dans le fichier `.env`.

Le `.env` devrait ressembler √† ceci :

```bash
DATABASE_URL="postgres://postgres:[VOTRE-MOT-DE-PASSE]@db.[VOTRE-REFERENCE-DE-PROJET].supabase.co:5432/postgres"
```

### √âtape 6 : Ex√©cutez la migration sur la base de donn√©es Postgres de Supabase

Ex√©cutez la migration sur la base de donn√©es Postgres de Supabase en utilisant la commande suivante :

```bash
npx prisma migrate deploy
```

### √âtape 7 : Obtenez vos cl√©s SMTP sur Resend

Alors, vous venez de cloner Documenso, d'installer les d√©pendances sur votre machine locale et de configurer votre base de donn√©es avec Supabase. Maintenant, SMTP manque. Les e-mails ne partiront pas ! R√©glons cela avec Resend.

Dans le tableau de bord de **[Resend](https://resend.com/)**, cliquez sur 'Ajouter une cl√© API' pour cr√©er une cl√© pour SMTP Resend.

![Cr√©ez une cl√© pour SMTP Resend](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/uh2rztgn09mlvecl34i5.png)

Ensuite, ajoutez et v√©rifiez votre domaine dans la section '**Domaines**' dans la barre lat√©rale. Cela vous permettra d'envoyer des e-mails depuis n'importe quelle adresse associ√©e √† votre domaine.

![V√©rifiez votre domaine sur Resend](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/nxgie0esz530vq5a494o.png)

Vous pouvez mettre √† jour votre fichier `.env` avec ce qui suit :

```bash
SMTP_MAIL_HOST = 'smtp.resend.com';
SMTP_MAIL_PORT = '25';
SMTP_MAIL_USER = 'resend';
SMTP_MAIL_PASSWORD = 'VOTRE_RESEND_API_KEY';
MAIL_FROM = 'noreply@[VOTRE_DOMAINE]';
```

### √âtape 8 : Cr√©ez un nouveau projet sur Vercel

Vous avez configur√© la base de donn√©es avec Supabase et √™tes pr√™t avec SMTP avec Resend. Presque l√† ! La prochaine √©tape consiste √† d√©ployer le projet. Nous utiliserons Vercel pour cela.

Sur votre tableau de bord Vercel, cr√©ez un nouveau projet en utilisant le projet fork√© depuis vos d√©p√¥ts GitHub. S√©lectionnez le projet parmi les options et cliquez sur '**Importer**' pour commencer

√† ex√©cuter Documenso.

![Cr√©ez un nouveau projet sur Vercel](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/gdy97tltpnu7vf4fc11f.png)

### √âtape 9 : Ajoutez les variables d'environnement √† votre projet Vercel

Dans la page '**Configurer le projet**', ajouter les variables d'environnement requises est essentiel pour garantir que l'application se d√©ploie sans erreur.

Sp√©cifiquement pour les variables `NEXT_PUBLIC_WEBAPP_URL` et `NEXTAUTH_URL`, vous devez ajouter `.vercel.app` √† votre nom de projet. Cela formera l'URL de d√©ploiement, qui sera au format : `https://[nom_du_projet].vercel.app`.

Par exemple, dans mon cas, l'URL de d√©ploiement est `https://documenso-supabase-web.vercel.app`.

![Ajoutez les variables d'environnement √† votre projet Vercel](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/aru33fk1i19h0valffow.png)

Voici un exemple de `.env` √† d√©ployer. Copiez-collez pour pr√©-remplir automatiquement les champs et cliquez sur '**D√©ployer**'. Il ne vous reste plus qu'√† attendre que votre projet se d√©ploie. Vous √™tes en direct ‚Äî profitez-en !

```bash
DATABASE_URL='postgresql://postgres:typeinastrongpassword@db.njuigobjlbteahssqbtw.supabase.co:5432/postgres'

NEXT_PUBLIC_WEBAPP_URL='https://documenso-supabase-web.vercel.app'
NEXTAUTH_SECRET='quelque chose d'obscur pour chiffrer vos jetons jwt'
NEXTAUTH_URL='https://documenso-supabase-web.vercel.app'

# Obtenir une cl√© Sendgrid Api ici : <https://signup.sendgrid.com>
SENDGRID_API_KEY=''

# D√©finissez les identifiants SMTP pour utiliser SMTP au lieu de l'API Sendgrid.
SMTP_MAIL_HOST='smtp.resend.com'
SMTP_MAIL_PORT='25'
SMTP_MAIL_USER='resend'
SMTP_MAIL_PASSWORD='VOTRE_RESEND_API_KEY'
MAIL_FROM='noreply@[VOTRE_DOMAINE]'

NEXT_PUBLIC_ALLOW_SIGNUP=true
```

## Conclusion

![D√©ploiement de Documenso](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/secg29j9j40o4u2oa8o8.png)

F√©licitations ! üéâ Vous avez d√©ploy√© avec succ√®s Documenso en utilisant Vercel, Supabase et Resend. Vous √™tes maintenant pr√™t √† cr√©er et signer vos propres documents avec votre propre Documenso auto-h√©berg√© !

Dans ce guide √©tape par √©tape, vous avez appris √† :

- configurer une base de donn√©es Postgres avec Supabase,
- installer SMTP avec Resend,
- d√©ployer votre projet avec Vercel.

√Ä vous de jouer ! Comment avez-vous trouv√© le tutoriel ? Si vous l'avez appr√©ci√©, [n'h√©sitez pas √† partager](https://twitter.com/documenso/status/1700141802693480482) ! Et si vous avez des questions ou des commentaires, n'h√©sitez pas √† me contacter sur [Twitter / X](https://twitter.com/EphraimDuncan_) (DM ouvert) ou [Discord](https://documen.so/discord).

Nous construisons une alternative open-source √† DocuSign et nous accueillons chaque contribution. Rendez-vous sur le d√©p√¥t GitHub et [laissez-nous une √©toile](https://github.com/documenso/documenso) !
